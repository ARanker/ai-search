# 🔍 RAG Search Engine
> **프로젝트 한줄 소개:** 고성능 문서 검색(RAG) 파이프라인입니다.
> **핵심 기술:** Python, FastAPI, LangChain, ChromaDB, Docker, Linux (WSL2)

## 🛠️ 개발 환경
- **OS:** Windows 11 (WSL2 Ubuntu 22.04 LTS환경에서 개발)
- **Hardware:** RTX 3080 (GPU 가속 활용), Ryzen 5700X3D
- **Language:** Python 3.14

---

## 🚀 트러블 슈팅 & 성능 최적화 로그 (Trouble Shooting)
이 프로젝트를 진행하며 마주친 기술적 문제와 해결 과정을 기록합니다.

### 1. 검색 정확도 이슈: Top-1의 함정 (2026-01-05)
#### 💥 문제 상황 (Problem)
- 사용자가 "What is RAID LEVEL 5?"라고 질문했을 때, 정확한 설명 대신 문서의 Header/Footer(저작권 문구 등)가 답변으로 나오는 현상 발생.
- 검색된 문서(`docs[0]`)를 확인해보니, 반복되는 저작권 문구가 질문과 벡터 유사도가 미세하게 높게 측정되어 1순위로 잡힘.

#### 🔎 원인 분석 (Cause)
- `similarity_search` 함수의 기본 설정이 `k=1`(가장 유사한 1개만 반환)로 되어 있어, 노이즈 데이터가 1등이 되면 정답을 아예 놓치게 됨.
- 문서 청킹(Chunking) 과정에서 의미 없는 헤더가 독립된 청크로 생성됨.

#### 💡 해결 및 결과 (Solution)
- **검색 후보군 확대:** `k` 값을 1에서 3으로 늘려 (`k=3`) 상위 3개의 문서를 가져오도록 로직 수정.
- **결과:** Top-1에는 여전히 노이즈가 섞일 때가 있지만, Top-2, Top-3에 포함된 정확한 본문 내용을 LLM에게 컨텍스트로 제공함으로써 답변 정확도 대폭 개선.

### 2. 데이터 중복 적재 이슈 (Data Duplication)
#### 💥 문제 상황
- `ingest.py`를 여러 번 실행한 후 검색했더니, 동일한 내용의 문서가 Top 1, 2, 3에 중복되어 나타남.
- 이로 인해 다양한 문서가 검색되지 않고, 특정 문서(노이즈)만 상위권을 독점함.

#### 🔎 원인
- 벡터 DB(ChromaDB)가 실행될 때마다 기존 데이터를 초기화하지 않고 **Append(추가)** 방식으로 동작함.
- 스크립트를 재실행할 때마다 같은 데이터가 계속 쌓여 문서가 N배로 증식됨.

#### 💡 해결
- 스크립트 실행 전 기존 DB 폴더(`chroma_db`)를 삭제하는 로직을 추가하여 **멱등성(Idempotency)** 확보.

---

## 📂 프로젝트 구조
(추후 작성 예정)
